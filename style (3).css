:root { --bg:#0f172a; --panel:#0b1220; --card:#111827; --text:#e5e7eb; --muted:#94a3b8; --accent:#22c55e; --danger:#ef4444; --warn:#f59e0b; --table:#1e3a8a; --table2:#2563eb; }
*{ box-sizing:border-box; } body{ margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; }
.wrap{ max-width:980px; margin:0 auto; padding:16px; } .topbar{ position:relative; display:flex; align-items:flex-start; justify-content:space-between; gap:10px; margin-bottom:10px; }
.title{ display:flex; flex-direction:column; line-height:1; }
.brand{ font-weight:900; font-size:22px; letter-spacing:0.5px; font-family: 'Fredoka','Nunito','Poppins','system-ui',-apple-system,Segoe UI,Roboto,Helvetica,Arial; }
.brand .r{ color:#ff3b30; } .brand .y{ color:#ffd60a; } .brand .o{ color:#ff8c00; }
.slogan{ margin-top:4px; font-size:12px; color:var(--muted); font-weight:700; font-style:italic; }
.menu-btn{ padding:10px 12px; border-radius:12px; background:#0b1220; border:1px solid #1f2937; color:var(--text); font-weight:700; align-self:flex-start; }
.card{ background:var(--card); border-radius:18px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
h1{ margin:0 0 8px; font-size:24px; } h2{ margin:14px 0 8px; } .muted{ color:var(--muted); }
.row{ display:flex; gap:10px; } .row>*{ flex:1; }
button{ width:100%; padding:14px; border:none; border-radius:14px; font-weight:700; font-size:16px; background:linear-gradient(180deg,#22c55e,#16a34a); color:#05170c; cursor:pointer; }
button.secondary{ background:#1f2937; color:var(--text); }
button.warn{ background:linear-gradient(180deg,var(--warn),#eab308); color:#111; }
button.danger{ background:linear-gradient(180deg,var(--danger),#b91c1c); color:#fff; }
button.link{ background:#0b1220; color:var(--text); border:1px solid #1f2937; }
button[disabled]{ opacity:.45; cursor:not-allowed; }
input[type=number],input[type=text],select{ width:100%; padding:12px; border-radius:12px; border:1px solid #1f2937; background:var(--panel); color:var(--text); font-size:16px; }
.pill{ display:inline-block; padding:6px 10px; border-radius:999px; background:var(--panel); color:var(--muted); font-size:12px; }
.players{ display:grid; gap:10px; } .player{ display:flex; align-items:center; justify-content:space-between; background:#101523; border:1px solid #1f2937; padding:10px 12px; border-radius:14px; }
.player.you{ outline:2px solid var(--accent); } .turn{ border:1px dashed var(--accent); }
.player-left{ display:flex; align-items:center; gap:10px; } .player-right{ display:flex; align-items:center; gap:10px; }
.tag{ font-size:12px; color:var(--muted); }
.skull{ font-size:14px; filter:drop-shadow(0 1px 1px rgba(0,0,0,.4)); }
.dice{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.die{ width:44px; height:44px; border-radius:12px; background:var(--panel); display:grid; place-items:center; font-weight:800; font-size:20px; border:1px solid #1f2937; }
.die.small{ width:22px; height:22px; font-size:13px; border-radius:6px; }
.die.reveal{ width:36px; height:36px; font-size:18px; transition:transform .35s ease, opacity .35s ease; }
.match{ box-shadow:0 0 0 2px var(--accent) inset, 0 0 10px rgba(34,197,94,.5); }
.fade-out .die.reveal{ transform:translateY(8px) scale(.9); opacity:0; }
.dudo-badge{ font-size:11px; padding:3px 7px; border-radius:999px; background:var(--danger); color:#fff; }
.hidden{ display:none !important; } .center{ text-align:center; } .big{ font-size:28px; font-weight:800; letter-spacing:1px; }
.toast{ position:fixed; bottom:16px; left:50%; transform:translateX(-50%); background:var(--panel); padding:12px 16px; border-radius:14px; border:1px solid #1f2937; z-index:999; }
.footer{ position:sticky; bottom:0; left:0; right:0; background:linear-gradient(180deg,transparent,rgba(0,0,0,.35)); padding-top:8px; }
.table-wrap{ display:grid; place-items:center; margin:12px 0 8px; }
.table{ width:100%; max-width:720px; aspect-ratio:1/1; border-radius:9999px; background:radial-gradient(75% 75% at 50% 30%, var(--table2), var(--table)); box-shadow:inset 0 8px 40px rgba(0,0,0,.45), 0 10px 30px rgba(0,0,0,.35); border:2px solid #0b3b8e; padding:18px; position:relative; overflow:visible; }
.seats{ position:absolute; inset:0; z-index:5; } .seat{ position:absolute; transform:translate(-50%,-50%); }
.seat-inner{ display:flex; align-items:center; gap:8px; background:rgba(0,0,0,0.28); padding:6px 8px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); backdrop-filter:blur(2px); white-space:nowrap; }
.seat.turn .seat-inner{ box-shadow:0 0 0 2px var(--accent) inset, 0 0 14px rgba(34,197,94,0.45); }
.name{ font-weight:700; font-size:13px; } .last-text{ font-size:12px; color:var(--text); opacity:.95; }
.bid-center{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); text-align:center; z-index:1; }
.bid-center .big{ text-shadow:0 2px 8px rgba(0,0,0,.35); }
.overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.55); z-index:1000; }
.modal{ background:#0b1220; border:1px solid #1f2937; padding:20px; border-radius:18px; width:min(560px, 94vw); text-align:center; box-shadow:0 10px 40px rgba(0,0,0,.5); position:relative; overflow:hidden; }
.reveal-grid{ display:grid; grid-template-columns:1fr; gap:10px; text-align:left; }
.reveal-row{ display:flex; align-items:center; gap:10px; border:1px solid #1f2937; border-radius:12px; padding:8px; }
.reveal-name{ font-weight:700; min-width:110px; } .reveal-dice{ display:flex; flex-wrap:wrap; gap:6px; }
.count-line{ margin-top:8px; font-weight:800; font-size:18px; }
@keyframes overlayFadeOut{ from{opacity:1; transform:scale(1);} to{opacity:0; transform:scale(.98);} } .overlay.fade-out .modal{ animation:overlayFadeOut 1s ease forwards; }
@keyframes diceRollIn{ from{transform:translateY(-6px) rotate(-12deg); opacity:0;} to{transform:none; opacity:1;} }
.roll-in .die{ animation:diceRollIn 600ms ease both; }
.roll-in .die:nth-child(2){ animation-delay:.05s; } .roll-in .die:nth-child(3){ animation-delay:.1s; }
.roll-in .die:nth-child(4){ animation-delay:.15s; } .roll-in .die:nth-child(5){ animation-delay:.2s; }
.confetti-host{ position:absolute; inset:0; pointer-events:none; overflow:hidden; } .confetti{ position:absolute; width:8px; height:12px; opacity:0; transform:translateY(-20px) rotate(0deg); }
@keyframes confettiFall{ 0%{ transform:translate(var(--x,0),-30px) rotate(0deg); opacity:0; } 10%{ opacity:1; } 100%{ transform:translate(var(--x,0),520px) rotate(var(--rot,360deg)); opacity:0; } }

/* ===== Perudo cup ===== */
.cup {
  --cup: #ff5252;
  position: relative;
  width: 24px;
  height: 26px;
  flex: 0 0 24px;
  transform: rotate(180deg);
  clip-path: polygon(18% 10%, 82% 10%, 70% 96%, 30% 96%);
  background: var(--cup);
  border:1px solid rgba(0,0,0,0.35);
  box-shadow: inset 0 -2px 6px rgba(0,0,0,.35), 0 1px 2px rgba(0,0,0,.3);
}
.cup::after{
  content:''; position:absolute; left:14%; right:14%; bottom:-2px; height:3px; border-radius:3px;
  background: rgba(255,255,255,0.28);
}
@keyframes cupShake {
  0%   { transform: rotate(180deg) translateX(0) rotate(0deg); }
  10%  { transform: rotate(180deg) translateX(-1px) rotate(-2deg); }
  20%  { transform: rotate(180deg) translateX(1px) rotate(2deg); }
  30%  { transform: rotate(180deg) translateX(-1px) rotate(-2deg); }
  40%  { transform: rotate(180deg) translateX(1px) rotate(2deg); }
  50%  { transform: rotate(180deg) translateX(-1px) rotate(-2deg); }
  60%  { transform: rotate(180deg) translateX(1px) rotate(2deg); }
  70%  { transform: rotate(180deg) translateX(-1px) rotate(-1deg); }
  80%  { transform: rotate(180deg) translateX(1px) rotate(1deg); }
  90%  { transform: rotate(180deg) translateX(0) rotate(0deg); }
  100% { transform: rotate(180deg) translateX(0) rotate(0deg); }
}
.cup.shake { animation: cupShake 2s ease-in-out; }

/* ---- Lobby ---- */
.room-code{ font-weight:800; letter-spacing:1px; }
.color-picker{ display:grid; grid-template-columns:repeat(9,1fr); gap:8px; margin-top:8px; }
.swatch{ border:2px solid rgba(255,255,255,0.12); border-radius:10px; height:34px; cursor:pointer; position:relative; }
.swatch[data-color="#ffffff"]{ box-shadow: inset 0 0 0 1px rgba(0,0,0,0.35); }
.swatch.selected{ outline:3px solid #22c55e; }
.swatch .tick{ position:absolute; right:6px; top:6px; font-size:14px; display:none; }
.swatch.selected .tick{ display:block; }

.table-wrap{ display:grid; place-items:center; margin:12px 0 8px; }
.table{ width:100%; max-width:720px; aspect-ratio:1/1; border-radius:9999px; background:radial-gradient(75% 75% at 50% 30%, var(--table2), var(--table)); box-shadow:inset 0 8px 40px rgba(0,0,0,.45), 0 10px 30px rgba(0,0,0,.35); border:2px solid #0b3b8e; padding:18px; position:relative; overflow:visible; }
.seats{ position:absolute; inset:0; z-index:5; } .seat{ position:absolute; transform:translate(-50%,-50%); }
.seat-inner{ display:flex; align-items:center; gap:8px; background:rgba(0,0,0,0.28); padding:6px 8px; border-radius:12px; border:1px solid rgba(255,255,255,0.08); backdrop-filter:blur(2px); white-space:nowrap; }

/* ---- Menu dropdown ---- */
.dropdown{ position:absolute; right:0; top:44px; background:#0b1220; border:1px solid #1f2937; border-radius:12px; padding:8px; box-shadow:0 10px 24px rgba(0,0,0,.45); width:200px; z-index:1500; }
.dropdown button{ width:100%; padding:10px 12px; border-radius:10px; margin:4px 0; }
.menu-brand{ display:flex; flex-direction:column; align-items:center; justify-content:center; margin-bottom:8px; }
.menu-brand .brand{ font-size:34px; }
.menu-brand .slogan{ font-size:13px; }
.top-brand{ display:flex; flex-direction:column; align-items:flex-start; }

/* MENU-SAFE: keep in-game controls visible; no JS/menu changes */
#screen-game #controls.hidden{ display:block !important; }